webpackJsonp([1],{"3oFI":function(e,t){},"7zck":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i=a("3EgV"),r=a.n(i),o=new n.a,s=(a("1e2d"),a("M4fF")),l=a.n(s),c=a("DAYN"),d={name:"layer-control",props:{layers:{type:Array,required:!0},map:{type:Object}},data:function(){return{firstImage:null}},computed:{computedList:{get:function(){return this.layers},set:function(e){o.$emit("select-layers",e)}}},watch:{layers:{handler:function(e){this.toggleLayers(),this.sortLayers()},deep:!0},firstImage:{handler:function(e){this.toggleLayers()},deep:!0}},mounted:function(){var e=this;o.$on("firstImage-changed",function(t){e.firstImage=t})},methods:{sortLayers:function(){for(var e=this.layers.length-2;e>=0;--e)for(var t=0;t<this.layers[e].data.length;++t)this.map.moveLayer(this.layers[e].data[t].id)},toggleLayers:function(){var e=this;if(!l.a.isNil(this.map)){var t=["none","visible"];l.a.each(this.layers,function(a){l.a.each(a.data,function(n){a.active&&("mapbox-layer"==a.layertype||"gee-layer"==a.layertype&&n.date===e.firstImage)?e.map.setLayoutProperty(n.id,"visibility",t[1]):e.map.setLayoutProperty(n.id,"visibility",t[0])})})}}},components:{draggable:a.n(c).a}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layer-control"},[a("draggable",{on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}},model:{value:e.computedList,callback:function(t){e.computedList=t},expression:"computedList"}},e._l(e.layers,function(t){return a("v-list",{key:t.id,attrs:{dense:"","pt-0":""}},[a("v-list-tile",[a("v-list-tile-action",[a("v-switch",{model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"layer.active"}})],1),e._v(" "),a("v-list-tile-title",[e._v(e._s(t.name))]),e._v(" "),a("v-list-tile-action",[a("v-icon",[e._v(e._s(t.icon))])],1)],1),e._v(" "),a("div",{staticClass:"bar-wrapper"},[t.css?a("div",{staticClass:"bar",style:t.css}):e._e(),e._v(" "),a("div",{staticClass:"bartext"},[e._v(e._s(t.range)+" "),a("span",{staticClass:"barspan"})]),e._v(" "),a("div",{staticClass:"information",domProps:{innerHTML:e._s(t.info)}},[e._v(e._s(t.info)+" ")])])],1)}))],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(e){a("u5aK")},"data-v-0b276c4c",null).exports,v=a("mvHQ"),m=a.n(v),g="http://vegetatie-monitor.appspot.com";function f(e,t,a,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s={id:t+"_composite",type:"raster",date:"composite",source:{type:"raster",tiles:[],tileSize:256}},l={dateBegin:a,region:n,vis:i};r&&(l.dateEnd=r),fetch(g+"/map/"+t+"/",{method:"POST",body:m()(l),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(a){s.source.tiles=[a.url],e.addLayer(s),o.$emit("add-data-layer",{dataset:t,layer:s})})}var y=["satellite","ndvi","landuse"],h={name:"layer-control",props:{layers:{type:Array,required:!0},map:{type:Object}},data:function(){return{beginDate:"2016-07-20",endDate:"2016-07-21",beginMenu:!1,endMenu:!1,modal:!1,firstImage:null,secondImage:null,imageMode:!1,Image1:[],Image2:[],firstImages:{},region:{coordinates:[[[5.846,51.984],[5.849,51.961],[5.91,51.96],[5.916,51.985],[5.877,51.99],[5.846,51.984]]],geodesic:!0,type:"Polygon"},radioButtons:"radio-composite"}},mounted:function(){var e=this;o.$on("map-loaded",function(t){e.changeModus(),e.changeDates()})},watch:{beginDate:{handler:function(e){this.changeDates(),this.changeModus()},deep:!0},endDate:{handler:function(e){this.changeDates(),this.changeModus()},deep:!0},radioButtons:{handler:function(e){this.changeModus()},deep:!0},firstImage:{handler:function(e){this.changeFirstImageDate()},deep:!0}},methods:{changeModus:function(){var e=this;o.$emit("firstImage-changed","composite"),"radio-composite"==this.radioButtons&&l.a.each(y,function(t){o.$emit("remove-data-layer",{dataset:t});var a=l.a.find(e.layers,{dataset:t}).vis;f(e.map,t,e.beginDate,e.region,a,e.endDate)})},changeFirstImageDate:function(){var e=this;o.$emit("firstImage-changed",this.firstImage),l.a.each(y,function(t){var a=l.a.find(e.layers,"dataset",t);if(void 0==l.a.find(a.data,{date:e.firstImage})){var n=(a=l.a.find(e.layers,{dataset:t})).vis;f(e.map,t,e.firstImage,e.region,n)}})},changeDates:function(){var e=this;l.a.each(y,function(t){var a=l.a.find(e.layers,"dataset","satellite").vis,n={dateBegin:e.beginDate,dateEnd:e.endDate,region:e.region,vis:a};fetch("http://vegetatie-monitor.appspot.com/map/satellite/times/",{method:"POST",body:m()(n),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.Image1=t.image_times,e.Image2=t.image_times,l.a.each(t.image_times,function(a,n){e.firstImages[a]=t.image_ids[n]})})})}},components:{}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"analysis-panel"},[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("\n      Analysis\n    ")])],1),e._v(" "),a("v-list",{attrs:{dense:"","pt-0":"","three-line":""}},[a("v-list-tile",{attrs:{dense:"","pt-0":"",id:"selection"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs8:"",sm5:""}},[a("v-menu",{ref:"beginMenu",attrs:{"font-size":"12px",lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px","return-value":e.beginDate},on:{"update:returnValue":function(t){e.beginDate=t}},model:{value:e.beginMenu,callback:function(t){e.beginMenu=t},expression:"beginMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Start date","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.beginDate,callback:function(t){e.beginDate=t},expression:"beginDate"}}),e._v(" "),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.beginDate,callback:function(t){e.beginDate=t},expression:"beginDate"}},[a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.beginMenu=!1}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.$refs.beginMenu.save(e.beginDate)}}},[e._v("OK")])],1)],1)],1),e._v(" "),a("v-flex",{attrs:{xs8:"",sm5:"","offset-xs1":""}},[a("v-menu",{ref:"endMenu",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px","return-value":e.endDate},on:{"update:returnValue":function(t){e.endDate=t}},model:{value:e.endMenu,callback:function(t){e.endMenu=t},expression:"endMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:"End date","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}),e._v(" "),a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}},[a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.endMenu=!1}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.$refs.endMenu.save(e.endDate)}}},[e._v("OK")])],1)],1)],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-list-tile",[a("v-radio-group",{attrs:{row:"",dense:""},model:{value:e.radioButtons,callback:function(t){e.radioButtons=t},expression:"radioButtons"}},[a("v-radio",{attrs:{label:"Composite",value:"radio-composite"}}),e._v(" "),a("v-radio",{attrs:{label:"1 image",value:"radio-1-image"}}),e._v(" "),a("v-radio",{attrs:{disabled:"",label:"2 images",value:"radio-2-image"}})],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-list-tile",[a("v-list-tile-title",[e._v("Select the range of dates to get Images: ")])],1),e._v(" "),a("v-list-tile",{attrs:{id:"selection"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs8:"",sm5:""}},[a("v-select",{attrs:{disabled:"radio-composite"==e.radioButtons,items:e.Image1,label:"Image 1","prepend-icon":"insert_photo","single-line":""},model:{value:e.firstImage,callback:function(t){e.firstImage=t},expression:"firstImage"}})],1),e._v(" "),a("v-flex",{attrs:{xs8:"",sm5:"","offset-xs1":""}},[a("v-select",{attrs:{disabled:"",items:e.Image2,label:"Image 2","prepend-icon":"insert_photo","single-line":""},model:{value:e.secondImage,callback:function(t){e.secondImage=t},expression:"secondImage"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var x=[{layertype:"mapbox-layer",name:"Kadaster",icon:"home",active:!1,data:[{id:"Kadaster",type:"fill",source:{type:"vector",url:"mapbox://ellispenning.5tu1qjtk"},"source-layer":"kadaster-vlakken-1i9erw",paint:{"fill-color":"rgba(32, 32, 32, 0.3)","fill-outline-color":"rgba(0, 0, 0, 0.3)"}}]},{layertype:"mapbox-layer",name:"Stroombanen",icon:"home",active:!0,data:[{id:"Streamlines",type:"fill",source:{type:"vector",url:"mapbox://ellispenning.4puwiyv9"},"source-layer":"stroombaan-8ndp71",paint:{"fill-color":"rgba(51, 163, 255, 0.2)","fill-outline-color":"rgba(51, 163, 255, 1)"}}]},{layertype:"mapbox-layer",name:"Vegetatielegger",icon:"home",active:!0,type:"group",data:[{id:"Vegetatielegger",type:"fill",source:{type:"vector",url:"mapbox://ellispenning.87a2u39q"},"source-layer":"vegetatie-vlakken-596nr3",paint:{"fill-color":{base:1,type:"categorical",property:"KLASSE",stops:[["Water","rgba(191, 239, 255, 255)"],["Verhard oppervlak","rgb(255, 129, 126)"],["Gras en Akker","rgb(238, 250, 212)"],["Riet en Ruigte","rgb(222, 189, 222)"],["Bos","rgb(115, 191, 115)"],["Struweel","rgb(217, 122, 54)"],["90-10","rgb(255, 236, 128)"],["70-30","rgb(242, 210, 24)"],["50-50","rgb(217, 187, 22)"]],default:"rgba(0, 0, 0, 0)"}}},{id:"Beheersgrenzen",type:"line",source:{type:"vector",url:"mapbox://ellispenning.dbeqewih"},"source-layer":"beheergrens-8l9whd",paint:{"line-color":"rgb(80,155,255)"}}]},{layertype:"gee-layer",name:"Classificatie",icon:"satellite",active:!1,dataset:"landuse",data:[],vis:{}},{layertype:"gee-layer",name:"Vegetatie (NDVI)",icon:"satellite",active:!1,dataset:"ndvi",data:[],vis:{}},{layertype:"gee-layer",name:"Satelliet beelden",icon:"satellite",active:!1,dataset:"satellite",data:[],vis:{bands:["red","green","blue"],gamma:2}}],I={name:"v-map-layers",data:function(){return{map:null,dateBegin:"2017-07-20",dateEnd:"2017-07-21",beginDate:"",endDate:""}},methods:{deferredMountedTo:function(e){_.each(x,function(t){o.$emit("add-layer",t),"mapbox-layer"===t.layertype&&_.each(t.data,function(t){e.addLayer(t)})})}}},k={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var D={name:"app",data:function(){return{map:null,drawer:null,layers:[]}},mounted:function(){var e=this;this.map=this.$refs.map.map,o.$on("remove-data-layer",function(t){_.each(e.layers,function(a){a.dataset===t.dataset&&_.each(a.data,function(n,i){void 0!=n&&n.id===t.dataset+"_composite"&&(a.data.splice(i,1),e.map.removeLayer(n.id),e.map.removeSource(n.id))})})}),o.$on("add-data-layer",function(t){_.each(e.layers,function(e){e.dataset===t.dataset&&e.data.push(t.layer)})}),o.$on("select-layers",function(t){n.a.set(e,"layers",t)}),o.$on("add-layer",function(t){e.layers.push(t)}),this.map.on("load",function(t){o.$emit("map-loaded",e.map)}),this.map.on("click",function(t){console.log(e.layers)})},methods:{},components:{"layer-control":p,"analysis-panel":a("VU/8")(h,b,!1,function(e){a("3oFI")},"data-v-54b0378e",null).exports,"v-map-layers":a("VU/8")(I,k,!1,function(e){a("XF5h")},null,null).exports}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{width:"400",id:"navdrawer",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-list",[a("v-list-tile",[a("v-list-tile-title",{staticClass:"title"},[e._v("\r\n            Layers\r\n          ")])],1)],1)],1),e._v(" "),a("layer-control",{attrs:{layers:e.layers,map:e.map}}),e._v(" "),a("analysis-panel",{attrs:{layers:e.layers,map:e.map}})],1),e._v(" "),a("v-toolbar",{attrs:{xs6:"",color:"indigo",dark:"",fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),a("v-toolbar-title",[e._v("Vegetatie Monitor")])],1),e._v(" "),a("v-content",[a("div",{attrs:{id:"map"}},[a("v-mapbox",{ref:"map",attrs:{"access-token":"pk.eyJ1Ijoic2lnZ3lmIiwiYSI6Il8xOGdYdlEifQ.3-JZpqwUa3hydjAJFXIlMA","map-style":"mapbox://styles/mapbox/light-v9",center:[5.673272,52.079502],zoom:7.88,pitch:0,bearing:0,"min-zoom":5,id:"map"}},[a("v-map-layers"),e._v(" "),a("v-mapbox-navigation-control")],1)],1)])],1)},staticRenderFns:[]};var M=a("VU/8")(D,w,!1,function(e){a("dYTo")},null,null).exports,$=a("5BM0"),L=a.n($);a("7zck");n.a.use(L.a),n.a.use(r.a),n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:M}})},XF5h:function(e,t){},dYTo:function(e,t){},u5aK:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.06ec56eb5523574ff62f.js.map