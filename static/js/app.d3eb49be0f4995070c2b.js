webpackJsonp([1],{"32+A":function(e,a){},"3woM":function(e,a){},"7zck":function(e,a){},"Hp+G":function(e,a){},NHnr:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("7+uW"),i=t("3EgV"),r=t.n(i),s=new n.a,o=(t("1e2d"),t("M4fF")),l=t.n(o),c=t("DAYN"),d={name:"layer-control",props:{layers:{type:Array,required:!0},map:{type:Object}},data:function(){return{firstImage:null}},computed:{computedList:{get:function(){return this.layers},set:function(e){s.$emit("select-layers",e)}}},watch:{layers:{handler:function(e){this.toggleLayers(),this.sortLayers()},deep:!0},firstImage:{handler:function(e){this.toggleLayers()},deep:!0}},mounted:function(){var e=this;s.$on("firstImage-changed",function(a){e.firstImage=a})},methods:{sortLayers:function(){for(var e=this.layers.length-2;e>=0;--e)for(var a=0;a<this.layers[e].data.length;++a)this.map.moveLayer(this.layers[e].data[a].id)},toggleLayers:function(){var e=this;if(!l.a.isNil(this.map)){var a=["none","visible"];l.a.each(this.layers,function(t){l.a.each(t.data,function(n){t.active&&("mapbox-layer"==t.layertype||"gee-layer"==t.layertype&&n.date===e.firstImage)?(e.map.setLayoutProperty(n.id,"visibility",a[1]),e.setOpacity(t,n)):e.map.setLayoutProperty(n.id,"visibility",a[0])})})}},setOpacity:function(e,a){if(e.opacity)try{var t,n=Math.max(.01*e.opacity,.01);"gee-layer"==e.layertype?t="raster-opacity":"fill"==a.type?t="fill-opacity":"line"==a.type&&(t="line-opacity"),t&&this.map.setPaintProperty(a.id,t,n)}catch(e){console.log("error setting opacity: "+n+"("+e.message+")")}},colorRamp:function(e){if(e&&e.colors)return"background: linear-gradient(to right, "+e.colors.join()+");"}},components:{draggable:t.n(c).a}},p={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"layer-control"},[t("v-expansion-panel",{},[t("draggable",{staticClass:"draggable",attrs:{options:{handle:".header"}},on:{start:function(a){e.drag=!0},end:function(a){e.drag=!1}},model:{value:e.computedList,callback:function(a){e.computedList=a},expression:"computedList"}},e._l(e.layers,function(a){return t("v-expansion-panel-content",{key:a.id},[t("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[t("v-list",{staticClass:"ma-0 pa-0",attrs:{dense:""}},[t("v-list-tile",{staticClass:"ma-0 pa-0"},[t("v-list-tile-action",[t("v-switch",{model:{value:a.active,callback:function(t){e.$set(a,"active",t)},expression:"layer.active"}})],1),e._v(" "),t("v-list-tile-title",[e._v(e._s(a.name))]),e._v(" "),t("v-list-tile-avatar",[t("img",{attrs:{src:a.icon}})])],1)],1)],1),e._v(" "),t("div",{staticClass:"ma-0 pl-5 pr-5"},[a.opacity?t("v-slider",{staticClass:"pa-0 ma-0",attrs:{"hide-details":"",title:"transparantie",min:1,max:100},model:{value:a.opacity,callback:function(t){e.$set(a,"opacity",t)},expression:"layer.opacity"}}):e._e(),e._v(" "),a.legend?t("div",[a.legend.range?[a.legend.colors?t("div",{staticClass:"color-ramp",style:e.colorRamp(a.legend)}):e._e(),e._v(" "),t("div",{staticClass:"range-ramp"},[e._v(e._s(a.legend.range))])]:e._e(),e._v(" "),a.legend.colors&&a.legend.labels?e._l(a.legend.colors.length,function(n){return t("div",{key:n,staticClass:"color-label"},[t("span",{staticClass:"colored-span",style:"background-color: "+a.legend.colors[n-1]}),e._v(" "),t("label",{staticClass:"ma-1"},[e._v(e._s(a.legend.labels[n-1]))])])}):e._e()],2):e._e()],1)])}))],1)],1)},staticRenderFns:[]};var u=t("VU/8")(d,p,!1,function(e){t("32+A")},"data-v-f313cfba",null).exports,g=t("mvHQ"),m=t.n(g),v="http://vegetatie-monitor.appspot.com";function f(e,a,t,n,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o={id:a+"_composite",type:"raster",date:"composite",source:{type:"raster",tiles:[],tileSize:256}},l={dateBegin:t,region:n,vis:i};r&&(l.dateEnd=r),fetch(v+"/map/"+a+"/",{method:"POST",body:m()(l),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){o.source.tiles=[t.url],e.addLayer(o),s.$emit("add-data-layer",{dataset:a,layer:o})})}var y=["satellite","ndvi","landuse"],b={name:"layer-control",props:{layers:{type:Array,required:!0},map:{type:Object}},data:function(){return{beginDate:"2016-07-20",endDate:"2016-07-21",beginMenu:!1,endMenu:!1,firstImage:null,secondImage:null,imageMode:!1,Image1:[],Image2:[],firstImages:{},region:{coordinates:[[[5.846,51.984],[5.849,51.961],[5.91,51.96],[5.916,51.985],[5.877,51.99],[5.846,51.984]]],geodesic:!0,type:"Polygon"},radioButtons:"radio-composite"}},mounted:function(){var e=this;s.$on("map-loaded",function(a){e.changeModus(),e.changeDates()})},watch:{beginDate:{handler:function(e){this.changeDates(),this.changeModus()},deep:!0},endDate:{handler:function(e){this.changeDates(),this.changeModus()},deep:!0},radioButtons:{handler:function(e){this.changeModus()},deep:!0},firstImage:{handler:function(e){this.changeFirstImageDate()},deep:!0}},methods:{changeModus:function(){var e=this;s.$emit("firstImage-changed","composite"),"radio-composite"==this.radioButtons&&l.a.each(y,function(a){s.$emit("remove-data-layer",{dataset:a});var t=l.a.find(e.layers,{dataset:a}).vis;f(e.map,a,e.beginDate,e.region,t,e.endDate)})},changeFirstImageDate:function(){var e=this;s.$emit("firstImage-changed",this.firstImage),l.a.each(y,function(a){var t=l.a.find(e.layers,"dataset",a);if(void 0==l.a.find(t.data,{date:e.firstImage})){var n=(t=l.a.find(e.layers,{dataset:a})).vis;f(e.map,a,e.firstImage,e.region,n)}})},changeDates:function(){var e=this;l.a.each(y,function(a){var t=l.a.find(e.layers,"dataset","satellite").vis,n={dateBegin:e.beginDate,dateEnd:e.endDate,region:e.region,vis:t};fetch("http://vegetatie-monitor.appspot.com/map/satellite/times/",{method:"POST",body:m()(n),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(a){e.Image1=a.image_times,e.Image2=a.image_times,l.a.each(a.image_times,function(t,n){e.firstImages[t]=a.image_ids[n]})})})}},components:{}},h={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"analysis-panel"},[t("v-toolbar",{attrs:{flat:""}},[t("v-toolbar-title",[e._v("\n      Analysis\n    ")])],1),e._v(" "),t("v-list",{attrs:{dense:"","pt-0":"","three-line":""}},[t("v-list-tile",{attrs:{dense:"","pt-0":"",id:"selection"}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs8:"",sm5:""}},[t("v-menu",{ref:"beginMenu",attrs:{"font-size":"12px",lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px","return-value":e.beginDate},on:{"update:returnValue":function(a){e.beginDate=a}},model:{value:e.beginMenu,callback:function(a){e.beginMenu=a},expression:"beginMenu"}},[t("v-text-field",{attrs:{slot:"activator",label:"Start date","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.beginDate,callback:function(a){e.beginDate=a},expression:"beginDate"}}),e._v(" "),t("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.beginDate,callback:function(a){e.beginDate=a},expression:"beginDate"}},[t("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){e.beginMenu=!1}}},[e._v("Cancel")]),e._v(" "),t("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){e.$refs.beginMenu.save(e.beginDate)}}},[e._v("OK")])],1)],1)],1),e._v(" "),t("v-flex",{attrs:{xs8:"",sm5:"","offset-xs1":""}},[t("v-menu",{ref:"endMenu",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","nudge-right":40,"min-width":"290px","return-value":e.endDate},on:{"update:returnValue":function(a){e.endDate=a}},model:{value:e.endMenu,callback:function(a){e.endMenu=a},expression:"endMenu"}},[t("v-text-field",{attrs:{slot:"activator",label:"End date","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.endDate,callback:function(a){e.endDate=a},expression:"endDate"}}),e._v(" "),t("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.endDate,callback:function(a){e.endDate=a},expression:"endDate"}},[t("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){e.endMenu=!1}}},[e._v("Cancel")]),e._v(" "),t("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(a){e.$refs.endMenu.save(e.endDate)}}},[e._v("OK")])],1)],1)],1)],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-list-tile",[t("v-radio-group",{attrs:{row:"",dense:""},model:{value:e.radioButtons,callback:function(a){e.radioButtons=a},expression:"radioButtons"}},[t("v-radio",{attrs:{label:"Composite",value:"radio-composite"}}),e._v(" "),t("v-radio",{attrs:{label:"1 image",value:"radio-1-image"}}),e._v(" "),t("v-radio",{attrs:{disabled:"",label:"2 images",value:"radio-2-image"}})],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-list-tile",[t("v-list-tile-title",[e._v("Select the range of dates to get Images: ")])],1),e._v(" "),t("v-list-tile",{attrs:{id:"selection"}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs8:"",sm5:""}},[t("v-select",{attrs:{disabled:"radio-composite"==e.radioButtons,items:e.Image1,label:"Image 1","prepend-icon":"insert_photo","single-line":""},model:{value:e.firstImage,callback:function(a){e.firstImage=a},expression:"firstImage"}})],1),e._v(" "),t("v-flex",{attrs:{xs8:"",sm5:"","offset-xs1":""}},[t("v-select",{attrs:{disabled:"",items:e.Image2,label:"Image 2","prepend-icon":"insert_photo","single-line":""},model:{value:e.secondImage,callback:function(a){e.secondImage=a},expression:"secondImage"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var x=[{layertype:"mapbox-layer",name:"Kadaster",icon:"static/images/legend-kadaster.png",opacity:100,active:!1,data:[{id:"Kadaster",type:"fill",source:{type:"vector",url:"mapbox://ellispenning.5tu1qjtk"},"source-layer":"kadaster-vlakken-1i9erw",paint:{"fill-color":"rgba(32, 32, 32, 0.3)","fill-outline-color":"rgba(0, 0, 0, 0.3)"}}]},{layertype:"mapbox-layer",name:"Stroombanen",icon:"static/images/legend-stroombaan.png",opacity:100,active:!0,data:[{id:"Streamlines",type:"fill",source:{type:"vector",url:"mapbox://ellispenning.4puwiyv9"},"source-layer":"stroombaan-8ndp71",paint:{"fill-color":"rgba(51, 163, 255, 0.2)","fill-outline-color":"rgba(51, 163, 255, 1)"}}]},{layertype:"gee-layer",name:"Classificatie",icon:"static/images/legend-classified.png",opacity:100,active:!1,dataset:"landuse",legend:{colors:["#a3e0ff","#ff827e","#eefad4","#debdde","#73bf73","#d97a36"],labels:["water","bebouwd of verhard","gras en akker","riet en ruigte","bos","struweel"]},data:[],vis:{}},{layertype:"mapbox-layer",name:"Vegetatielegger",icon:"static/images/legend-legger.png",opacity:100,active:!0,type:"group",legend:{colors:["#a3e0ff","#ff827e","#eefad4","#debdde","#73bf73","#d97a36","#ffec80","#f2d218","#d9bb16"],labels:["water","bebouwd of verhard","gras en akker","riet en ruigte","bos","struweel","mengklasse 90/10","mengklasse 70/30","mengklasse 50/50"]},data:[{id:"Vegetatielegger",type:"fill",source:{type:"vector",url:"mapbox://ellispenning.87a2u39q"},"source-layer":"vegetatie-vlakken-596nr3",paint:{"fill-color":{base:1,type:"categorical",property:"KLASSE",stops:[["Water","rgba(191, 239, 255, 255)"],["Verhard oppervlak","rgb(255, 129, 126)"],["Gras en Akker","rgb(238, 250, 212)"],["Riet en Ruigte","rgb(222, 189, 222)"],["Bos","rgb(115, 191, 115)"],["Struweel","rgb(217, 122, 54)"],["90-10","rgb(255, 236, 128)"],["70-30","rgb(242, 210, 24)"],["50-50","rgb(217, 187, 22)"]],default:"rgba(0, 0, 0, 0)"}}},{id:"Beheersgrenzen",type:"line",source:{type:"vector",url:"mapbox://ellispenning.dbeqewih"},"source-layer":"beheergrens-8l9whd",paint:{"line-color":"rgb(80,155,255)"}}]},{layertype:"gee-layer",name:"Vegetatie (NDVI)",icon:"static/images/legend-ndvi.png",opacity:100,active:!1,dataset:"ndvi",legend:{colors:["#000000","#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0","#ffffff","#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],range:"-1 1"},data:[],vis:{}},{layertype:"gee-layer",name:"Satelliet beelden",icon:"static/images/legend-rgb.png",opacity:100,active:!1,dataset:"satellite",data:[],vis:{bands:["red","green","blue"],min:.05,max:.35,gamma:2}}],k={name:"v-map-layers",data:function(){return{map:null,dateBegin:"2017-07-20",dateEnd:"2017-07-21",beginDate:"",endDate:""}},methods:{deferredMountedTo:function(e){_.each(x,function(a){s.$emit("add-layer",a),"mapbox-layer"===a.layertype&&_.each(a.data,function(a){e.addLayer(a)})})}}},w={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var I={name:"app",data:function(){return{map:null,drawer:null,layers:[]}},mounted:function(){var e=this;this.map=this.$refs.map.map,s.$on("remove-data-layer",function(a){var t=_.find(e.layers,{dataset:a.dataset});_.each(t.data,function(n,i){n.id===a.dataset+"_composite"&&(t.data.splice(i,1),e.map.removeLayer(n.id),e.map.removeSource(n.id))})}),s.$on("add-data-layer",function(a){_.find(e.layers,{dataset:a.dataset}).data.push(a.layer)}),s.$on("select-layers",function(a){n.a.set(e,"layers",a)}),s.$on("add-layer",function(a){e.layers.push(a)}),this.map.on("load",function(a){s.$emit("map-loaded",e.map)}),this.map.on("click",function(a){console.log(e.layers)})},methods:{},components:{"layer-control":u,"analysis-panel":t("VU/8")(b,h,!1,function(e){t("ohOl")},"data-v-4dc575b5",null).exports,"v-map-layers":t("VU/8")(k,w,!1,function(e){t("Hp+G")},null,null).exports}},D={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-app",{attrs:{id:"inspire"}},[t("v-navigation-drawer",{attrs:{width:"400",id:"navdrawer",app:""},model:{value:e.drawer,callback:function(a){e.drawer=a},expression:"drawer"}},[t("v-toolbar",{attrs:{flat:""}},[t("v-list",[t("v-list-tile",[t("v-list-tile-title",{staticClass:"title"},[e._v("\n            Kaartlagen\n          ")])],1)],1)],1),e._v(" "),t("layer-control",{attrs:{layers:e.layers,map:e.map}}),e._v(" "),t("analysis-panel",{attrs:{layers:e.layers,map:e.map}})],1),e._v(" "),t("v-toolbar",{attrs:{xs6:"",color:"indigo",dark:"",fixed:"",app:""}},[t("v-toolbar-side-icon",{on:{click:function(a){a.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),t("v-toolbar-title",[e._v("Vegetatie Monitor")])],1),e._v(" "),t("v-content",[t("div",{attrs:{id:"map"}},[t("v-mapbox",{ref:"map",attrs:{"access-token":"pk.eyJ1Ijoic2lnZ3lmIiwiYSI6Il8xOGdYdlEifQ.3-JZpqwUa3hydjAJFXIlMA","map-style":"mapbox://styles/mapbox/light-v9",center:[5.673272,52.079502],zoom:7.88,pitch:0,bearing:0,"min-zoom":5,id:"map"}},[t("v-map-layers"),e._v(" "),t("v-mapbox-navigation-control")],1)],1)])],1)},staticRenderFns:[]};var M=t("VU/8")(I,D,!1,function(e){t("3woM")},null,null).exports,$=t("5BM0"),C=t.n($);t("7zck");n.a.use(C.a),n.a.use(r.a),n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",components:{App:M}})},ohOl:function(e,a){}},["NHnr"]);
//# sourceMappingURL=app.d3eb49be0f4995070c2b.js.map